<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Robot Status Page</title>
    <script type="text/javascript">
		var xmlhttp = new XMLHttpRequest(); 		
		var isAjaxWorking = false;
		var url = "http://129.21.30.80/cgi-bin/status.py";
		function checkRobotStatus() {
			if(xmlhttp && !isAjaxWorking) {
				xmlhttp.open("GET", url, true);
				xmlhttp.onreadystatechange = function() {
						console.log(xmlhttp.readyState);
						isAjaxWorking = false;
						if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
							console.log(xmlhttp);
							var foo = document.getElementById("target");
								foo.innerHTML = xmlhttp.response;
							
						} else if(xmlhttp.readyState == 4 && xmlhttp.status > 200) {
							var foo = document.getElementById("target");
								foo.innerHTML = "Something is wrong";
						}
					};
				isAjaxWorking = true;
				xmlhttp.send();
			}
			setTimeout("checkRobotStatus();",5000);
		}
	</script>
</head>

<body onload="checkRobotStatus();">
	<div><h4>Welcome</h4></div>
	<div id = "target">
		<h3>Robot Status</h3>
		<table>
			<tr border="1">
				<td>Robot Name</td>
				<td>Robot Status</td>
			</tr>
			<tr>
				<td >$robotname</td>
				<td>$status</td>
			</tr>
		</table>
	</div>
</body>
</html>
